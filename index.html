<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TON –ö–ª–∏–∫–µ—Ä</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
    <style>
        :root {
            --primary-color: #0088cc;
            --secondary-color: #24a3d8;
            --accent-color: #ff6b00;
            --background-color: #1a1a2e;
            --card-color: #16213e;
            --text-color: #ffffff;
            --border-radius: 12px;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--background-color);
            color: var(--text-color);
            overflow-x: hidden;
        }

        .container {
            max-width: 480px;
            margin: 0 auto;
            padding: 10px;
        }

        /* Header Styles */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 15px;
            background-color: var(--card-color);
            border-radius: var(--border-radius);
            margin-bottom: 15px;
            box-shadow: var(--shadow);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .level-badge {
            background-color: var(--accent-color);
            padding: 3px 8px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
        }

        .wallet-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .connect-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: var(--border-radius);
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .connect-btn:hover {
            background-color: var(--secondary-color);
        }

        /* Main Balance */
        .balance-section {
            text-align: center;
            padding: 20px;
            background-color: var(--card-color);
            border-radius: var(--border-radius);
            margin-bottom: 15px;
            box-shadow: var(--shadow);
        }

        .balance-label {
            font-size: 16px;
            opacity: 0.8;
            margin-bottom: 5px;
        }

        .balance-amount {
            font-size: 36px;
            font-weight: bold;
            color: var(--accent-color);
            margin-bottom: 10px;
        }

        .ton-balance {
            font-size: 14px;
            opacity: 0.7;
        }

        /* Clicker Section */
        .clicker-section {
            text-align: center;
            padding: 20px;
            background-color: var(--card-color);
            border-radius: var(--border-radius);
            margin-bottom: 15px;
            box-shadow: var(--shadow);
        }

        .click-button {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border: none;
            color: white;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.1s, box-shadow 0.3s;
            margin-bottom: 20px;
        }

        .click-button:active {
            transform: scale(0.95);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .click-stats {
            display: flex;
            justify-content: space-around;
            margin-top: 10px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 18px;
            font-weight: bold;
            color: var(--accent-color);
        }

        .stat-label {
            font-size: 12px;
            opacity: 0.7;
        }

        /* Upgrades Section */
        .upgrades-section {
            background-color: var(--card-color);
            border-radius: var(--border-radius);
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: var(--shadow);
        }

        .section-title {
            font-size: 18px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .upgrade-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .upgrade-item:last-child {
            border-bottom: none;
        }

        .upgrade-info {
            flex: 1;
        }

        .upgrade-name {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .upgrade-description {
            font-size: 12px;
            opacity: 0.7;
        }

        .upgrade-level {
            font-size: 12px;
            opacity: 0.7;
        }

        .upgrade-cost {
            font-weight: bold;
            color: var(--accent-color);
            margin-right: 10px;
        }

        .buy-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: var(--border-radius);
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .buy-btn:disabled {
            background-color: #555;
            cursor: not-allowed;
        }

        .buy-btn:hover:not(:disabled) {
            background-color: var(--secondary-color);
        }

        /* Ad Section */
        .ad-section {
            background-color: var(--card-color);
            border-radius: var(--border-radius);
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: var(--shadow);
        }

        .ad-banner {
            width: 100%;
            height: 100px;
            background: linear-gradient(135deg, #4a4a8a, #2c2c54);
            border-radius: var(--border-radius);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
            color: white;
            font-weight: bold;
            position: relative;
            overflow: hidden;
        }

        .ad-banner::before {
            content: "–†–ï–ö–õ–ê–ú–ê";
            position: absolute;
            top: 5px;
            right: 5px;
            background-color: rgba(0, 0, 0, 0.5);
            padding: 2px 5px;
            border-radius: 3px;
            font-size: 10px;
        }

        .ad-reward {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background-color: rgba(255, 107, 0, 0.1);
            border-radius: var(--border-radius);
            margin-bottom: 10px;
        }

        .reward-info {
            flex: 1;
        }

        .reward-title {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .reward-description {
            font-size: 12px;
            opacity: 0.7;
        }

        .watch-btn {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: var(--border-radius);
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .watch-btn:hover {
            background-color: #ff8c00;
        }

        /* Bottom Navigation */
        .bottom-nav {
            display: flex;
            justify-content: space-around;
            background-color: var(--card-color);
            border-radius: var(--border-radius);
            padding: 10px 0;
            box-shadow: var(--shadow);
            position: sticky;
            bottom: 10px;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            padding: 5px 10px;
            border-radius: var(--border-radius);
            transition: background-color 0.3s;
        }

        .nav-item.active {
            background-color: rgba(0, 136, 204, 0.2);
        }

        .nav-icon {
            font-size: 20px;
            margin-bottom: 5px;
        }

        .nav-label {
            font-size: 12px;
        }

        /* TON Connect Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: var(--card-color);
            border-radius: var(--border-radius);
            padding: 20px;
            width: 90%;
            max-width: 400px;
            box-shadow: var(--shadow);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .modal-title {
            font-size: 18px;
            font-weight: bold;
        }

        .close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
        }

        .wallet-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .wallet-option {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .wallet-option:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }

        .wallet-icon {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Responsive Design */
        @media (max-width: 480px) {
            .container {
                padding: 5px;
            }
            
            .header {
                padding: 8px 10px;
            }
            
            .balance-amount {
                font-size: 28px;
            }
            
            .click-button {
                width: 120px;
                height: 120px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header Section -->
        <div class="header">
            <div class="user-info">
                <div class="avatar" id="user-avatar">U</div>
                <div>
                    <div id="user-name">–ò–≥—Ä–æ–∫</div>
                    <div class="level-badge">–£—Ä–æ–≤–µ–Ω—å <span id="user-level">1</span></div>
                </div>
            </div>
            <div class="wallet-info">
                <div id="ton-balance">0 TON</div>
                <button class="connect-btn" id="connect-wallet">–ü–æ–¥–∫–ª—é—á–∏—Ç—å</button>
            </div>
        </div>

        <!-- Main Balance -->
        <div class="balance-section">
            <div class="balance-label">–í–∞—à –±–∞–ª–∞–Ω—Å</div>
            <div class="balance-amount" id="game-balance">0</div>
            <div class="ton-balance" id="ton-equivalent">‚âà 0 TON</div>
        </div>

        <!-- Clicker Section -->
        <div class="clicker-section">
            <button class="click-button" id="click-button">–ö–õ–ò–ö!</button>
            <div class="click-stats">
                <div class="stat-item">
                    <div class="stat-value" id="click-power">1</div>
                    <div class="stat-label">–°–∏–ª–∞ –∫–ª–∏–∫–∞</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="auto-income">0/—Å–µ–∫</div>
                    <div class="stat-label">–ê–≤—Ç–æ–¥–æ—Ö–æ–¥</div>
                </div>
            </div>
        </div>

        <!-- Upgrades Section -->
        <div class="upgrades-section">
            <div class="section-title">
                <span>–£–ª—É—á—à–µ–Ω–∏—è</span>
                <span id="upgrades-count">0/5</span>
            </div>
            <div id="upgrades-list">
                <!-- Upgrades will be populated by JavaScript -->
            </div>
        </div>

        <!-- Ad Section -->
        <div class="ad-section">
            <div class="ad-banner">
                –†–µ–∫–ª–∞–º–Ω—ã–π –±–∞–Ω–Ω–µ—Ä
            </div>
            <div class="ad-reward">
                <div class="reward-info">
                    <div class="reward-title">–°–º–æ—Ç—Ä–∏ —Ä–µ–∫–ª–∞–º—É - –ø–æ–ª—É—á–∞–π –±–æ–Ω—É—Å—ã!</div>
                    <div class="reward-description">+100 –º–æ–Ω–µ—Ç –∑–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä</div>
                </div>
                <button class="watch-btn" id="watch-ad">–°–º–æ—Ç—Ä–µ—Ç—å</button>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <div class="bottom-nav">
            <div class="nav-item active">
                <div class="nav-icon">üè†</div>
                <div class="nav-label">–ì–ª–∞–≤–Ω–∞—è</div>
            </div>
            <div class="nav-item">
                <div class="nav-icon">‚ö°</div>
                <div class="nav-label">–ë—É—Å—Ç–µ—Ä—ã</div>
            </div>
            <div class="nav-item">
                <div class="nav-icon">üéØ</div>
                <div class="nav-label">–ó–∞–¥–∞–Ω–∏—è</div>
            </div>
            <div class="nav-item">
                <div class="nav-icon">üë•</div>
                <div class="nav-label">–î—Ä—É–∑—å—è</div>
            </div>
            <div class="nav-item">
                <div class="nav-icon">‚öôÔ∏è</div>
                <div class="nav-label">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
            </div>
        </div>
    </div>

    <!-- TON Connect Modal -->
    <div class="modal" id="wallet-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">–ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª–µ–∫</div>
                <button class="close-btn" id="close-modal">&times;</button>
            </div>
            <div class="wallet-options">
                <div class="wallet-option" id="tonkeeper-option">
                    <div class="wallet-icon">T</div>
                    <div>Tonkeeper</div>
                </div>
                <div class="wallet-option" id="tonwallet-option">
                    <div class="wallet-icon">W</div>
                    <div>TON Wallet</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.enableClosingConfirmation();

        // –ò–≥—Ä–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let gameState = {
            balance: 0,
            clickPower: 1,
            autoIncome: 0,
            level: 1,
            experience: 0,
            upgrades: [
                { id: 1, name: "–£–ª—É—á—à–µ–Ω–Ω—ã–π –∫–ª–∏–∫", description: "+1 –∫ —Å–∏–ª–µ –∫–ª–∏–∫–∞", level: 0, cost: 10, income: 0 },
                { id: 2, name: "–ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä", description: "+1 –º–æ–Ω–µ—Ç–∞ –≤ —Å–µ–∫—É–Ω–¥—É", level: 0, cost: 50, income: 1 },
                { id: 3, name: "–ú–æ—â–Ω—ã–π –∫–ª–∏–∫", description: "+5 –∫ —Å–∏–ª–µ –∫–ª–∏–∫–∞", level: 0, cost: 200, income: 0 },
                { id: 4, name: "–§–µ—Ä–º–∞", description: "+5 –º–æ–Ω–µ—Ç –≤ —Å–µ–∫—É–Ω–¥—É", level: 0, cost: 1000, income: 5 },
                { id: 5, name: "–ó–∞–≤–æ–¥", description: "+25 –º–æ–Ω–µ—Ç –≤ —Å–µ–∫—É–Ω–¥—É", level: 0, cost: 5000, income: 25 }
            ],
            lastDailyBonus: null,
            walletConnected: false,
            tonBalance: 0
        };

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–∑ localStorage
        function loadGameState() {
            const savedState = localStorage.getItem('tonClickerGame');
            if (savedState) {
                const parsed = JSON.parse(savedState);
                // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —á–∏—Å–ª–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, —Å–æ—Ö—Ä–∞–Ω—è—è —Å—Ç—Ä—É–∫—Ç—É—Ä—É upgrades
                gameState.balance = parsed.balance || 0;
                gameState.clickPower = parsed.clickPower || 1;
                gameState.autoIncome = parsed.autoIncome || 0;
                gameState.level = parsed.level || 1;
                gameState.experience = parsed.experience || 0;
                gameState.lastDailyBonus = parsed.lastDailyBonus || null;
                gameState.walletConnected = parsed.walletConnected || false;
                gameState.tonBalance = parsed.tonBalance || 0;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —É—Ä–æ–≤–Ω–∏ —É–ª—É—á—à–µ–Ω–∏–π
                if (parsed.upgrades) {
                    for (let i = 0; i < parsed.upgrades.length; i++) {
                        if (gameState.upgrades[i]) {
                            gameState.upgrades[i].level = parsed.upgrades[i].level || 0;
                        }
                    }
                }
            }
            updateUI();
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ localStorage
        function saveGameState() {
            localStorage.setItem('tonClickerGame', JSON.stringify(gameState));
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function updateUI() {
            // –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å
            document.getElementById('game-balance').textContent = formatNumber(gameState.balance);
            document.getElementById('ton-equivalent').textContent = `‚âà ${(gameState.balance / 1000).toFixed(4)} TON`;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∫–ª–∏–∫–æ–≤
            document.getElementById('click-power').textContent = gameState.clickPower;
            document.getElementById('auto-income').textContent = `${gameState.autoIncome}/—Å–µ–∫`;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            document.getElementById('user-level').textContent = gameState.level;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —É–ª—É—á—à–µ–Ω–∏—è
            updateUpgradesUI();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ—à–µ–ª—å–∫–µ
            document.getElementById('ton-balance').textContent = `${gameState.tonBalance.toFixed(2)} TON`;
            document.getElementById('connect-wallet').textContent = gameState.walletConnected ? '–û—Ç–∫–ª—é—á–∏—Ç—å' : '–ü–æ–¥–∫–ª—é—á–∏—Ç—å';
        }

        // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∏—Å–µ–ª
        function formatNumber(num) {
            if (num >= 1000000) {
                return (num / 1000000).toFixed(1) + 'M';
            } else if (num >= 1000) {
                return (num / 1000).toFixed(1) + 'K';
            }
            return num.toString();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —É–ª—É—á—à–µ–Ω–∏–π
        function updateUpgradesUI() {
            const upgradesList = document.getElementById('upgrades-list');
            upgradesList.innerHTML = '';
            
            let totalUpgrades = 0;
            let maxUpgrades = gameState.upgrades.length;
            
            gameState.upgrades.forEach(upgrade => {
                totalUpgrades += upgrade.level;
                
                const upgradeElement = document.createElement('div');
                upgradeElement.className = 'upgrade-item';
                
                const nextCost = Math.floor(upgrade.cost * Math.pow(1.5, upgrade.level));
                const canAfford = gameState.balance >= nextCost;
                
                upgradeElement.innerHTML = `
                    <div class="upgrade-info">
                        <div class="upgrade-name">${upgrade.name}</div>
                        <div class="upgrade-description">${upgrade.description}</div>
                        <div class="upgrade-level">–£—Ä–æ–≤–µ–Ω—å: ${upgrade.level}</div>
                    </div>
                    <div>
                        <span class="upgrade-cost">${formatNumber(nextCost)}</span>
                        <button class="buy-btn" data-id="${upgrade.id}" ${canAfford ? '' : 'disabled'}>
                            –ö—É–ø–∏—Ç—å
                        </button>
                    </div>
                `;
                
                upgradesList.appendChild(upgradeElement);
            });
            
            document.getElementById('upgrades-count').textContent = `${totalUpgrades}/${maxUpgrades}`;
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–Ω–æ–ø–æ–∫ –ø–æ–∫—É–ø–∫–∏
            document.querySelectorAll('.buy-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const upgradeId = parseInt(this.getAttribute('data-id'));
                    buyUpgrade(upgradeId);
                });
            });
        }

        // –ü–æ–∫—É–ø–∫–∞ —É–ª—É—á—à–µ–Ω–∏—è
        function buyUpgrade(upgradeId) {
            const upgrade = gameState.upgrades.find(u => u.id === upgradeId);
            if (!upgrade) return;
            
            const cost = Math.floor(upgrade.cost * Math.pow(1.5, upgrade.level));
            
            if (gameState.balance >= cost) {
                gameState.balance -= cost;
                upgrade.level += 1;
                
                if (upgrade.income > 0) {
                    gameState.autoIncome += upgrade.income;
                } else {
                    gameState.clickPower += parseInt(upgrade.description.match(/\d+/)[0]);
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º –æ–ø—ã—Ç –∑–∞ –ø–æ–∫—É–ø–∫—É —É–ª—É—á—à–µ–Ω–∏—è
                addExperience(5);
                
                saveGameState();
                updateUI();
                
                // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ–∫—É–ø–∫–∏
                const button = document.querySelector(`.buy-btn[data-id="${upgradeId}"]`);
                button.textContent = '–ö—É–ø–ª–µ–Ω–æ!';
                setTimeout(() => {
                    if (button.parentElement) {
                        button.textContent = '–ö—É–ø–∏—Ç—å';
                    }
                }, 1000);
            }
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–ø—ã—Ç–∞
        function addExperience(amount) {
            gameState.experience += amount;
            const expToNextLevel = gameState.level * 100;
            
            if (gameState.experience >= expToNextLevel) {
                gameState.level += 1;
                gameState.experience = 0;
                
                // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–æ–≤–æ–º —É—Ä–æ–≤–Ω–µ
                showNotification(`–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –¥–æ—Å—Ç–∏–≥–ª–∏ —É—Ä–æ–≤–Ω—è ${gameState.level}`);
            }
        }

        // –ü–æ–∫–∞–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        function showNotification(message) {
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Telegram WebApp.showPopup
            alert(message);
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞
        document.getElementById('click-button').addEventListener('click', function() {
            gameState.balance += gameState.clickPower;
            addExperience(1);
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –∫–ª–∏–∫–∞
            this.style.transform = 'scale(0.95)';
            setTimeout(() => {
                this.style.transform = 'scale(1)';
            }, 100);
            
            saveGameState();
            updateUI();
        });

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–æ—Ö–æ–¥
        setInterval(() => {
            if (gameState.autoIncome > 0) {
                gameState.balance += gameState.autoIncome;
                saveGameState();
                updateUI();
            }
        }, 1000);

        // –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å
        function checkDailyBonus() {
            const today = new Date().toDateString();
            if (gameState.lastDailyBonus !== today) {
                gameState.lastDailyBonus = today;
                gameState.balance += 100;
                addExperience(10);
                saveGameState();
                updateUI();
                showNotification('–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å: +100 –º–æ–Ω–µ—Ç!');
            }
        }

        // –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∫–ª–∞–º—ã
        document.getElementById('watch-ad').addEventListener('click', function() {
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–∫–ª–∞–º–Ω–æ–π —Å–µ—Ç—å—é
            // –î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–ª—è–µ–º –±–æ–Ω—É—Å
            gameState.balance += 100;
            addExperience(5);
            saveGameState();
            updateUI();
            
            this.textContent = '–°–º–æ—Ç—Ä—é...';
            this.disabled = true;
            
            setTimeout(() => {
                this.textContent = '–°–º–æ—Ç—Ä–µ—Ç—å';
                this.disabled = false;
                showNotification('–†–µ–∫–ª–∞–º–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–∞! +100 –º–æ–Ω–µ—Ç');
            }, 3000);
        });

        // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞
        document.getElementById('connect-wallet').addEventListener('click', function() {
            if (gameState.walletConnected) {
                // –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞
                gameState.walletConnected = false;
                gameState.tonBalance = 0;
                updateUI();
                showNotification('–ö–æ—à–µ–ª–µ–∫ –æ—Ç–∫–ª—é—á–µ–Ω');
            } else {
                // –ü–æ–∫–∞–∑ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
                document.getElementById('wallet-modal').style.display = 'flex';
            }
        });

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
        document.getElementById('close-modal').addEventListener('click', function() {
            document.getElementById('wallet-modal').style.display = 'none';
        });

        // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Tonkeeper
        document.getElementById('tonkeeper-option').addEventListener('click', function() {
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å TON Connect
            // –î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Å—Ç–æ –ø–æ–¥–∫–ª—é—á–∞–µ–º –∫–æ—à–µ–ª–µ–∫
            gameState.walletConnected = true;
            gameState.tonBalance = 1.5; // –î–µ–º–æ –±–∞–ª–∞–Ω—Å
            document.getElementById('wallet-modal').style.display = 'none';
            updateUI();
            showNotification('Tonkeeper –ø–æ–¥–∫–ª—é—á–µ–Ω!');
        });

        // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ TON Wallet
        document.getElementById('tonwallet-option').addEventListener('click', function() {
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å TON Connect
            // –î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Å—Ç–æ –ø–æ–¥–∫–ª—é—á–∞–µ–º –∫–æ—à–µ–ª–µ–∫
            gameState.walletConnected = true;
            gameState.tonBalance = 2.3; // –î–µ–º–æ –±–∞–ª–∞–Ω—Å
            document.getElementById('wallet-modal').style.display = 'none';
            updateUI();
            showNotification('TON Wallet –ø–æ–¥–∫–ª—é—á–µ–Ω!');
        });

        // –ù–∞–≤–∏–≥–∞—Ü–∏—è
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', function() {
                document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
                this.classList.add('active');
                
                // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ä–∞–∑–¥–µ–ª–∞–º–∏
                showNotification(`–†–∞–∑–¥–µ–ª "${this.querySelector('.nav-label').textContent}" –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ`);
            });
        });

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram
        if (tg.initDataUnsafe.user) {
            const user = tg.initDataUnsafe.user;
            document.getElementById('user-name').textContent = user.first_name || '–ò–≥—Ä–æ–∫';
            document.getElementById('user-avatar').textContent = user.first_name ? user.first_name[0] : 'U';
        }

        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        loadGameState();
        checkDailyBonus();
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å –∫–∞–∂–¥—ã–π —á–∞—Å
        setInterval(checkDailyBonus, 60 * 60 * 1000);
    </script>
</body>
</html>
